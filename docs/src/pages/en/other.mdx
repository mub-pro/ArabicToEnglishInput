---
title: "Other frameworks"
layout: ../../layouts/MainLayout.astro
---
import PreactInput from '../../components/AtEInput/preact';

## React-Native
```jsx
import * as React from "react";
import { View, StyleSheet, Image, Text } from "react-native";
import { useState } from "react";

const arabicToEnglish = (string) => {
  const number = string.replace(/[^0-9٠-٩]+/g, "");
  return number.replace(/[٠-٩]/g, (digit) => "٠١٢٣٤٥٦٧٨٩".indexOf(digit));
};

export default function MyComponent(props) {
  const [number, setNumber] = useState(() => "");

  return (
    <>
      <View>
        <Text>This input changes arabic numbers to english numbers! </Text>
      </View>

      <View
        value={number}
        onInput={(event) => setNumber(arabicToEnglish(event.target.value))}
      />
    </>
  );
}
```

## Qwik
```jsx
// GENERATED BY MITOSIS

import { Fragment, component$, h, useStore } from "@builder.io/qwik";
const arabicToEnglish = (string) => {
  const number = string.replace(/[^0-9٠-٩]+/g, "");
  return number.replace(/[٠-٩]/g, (digit) => "٠١٢٣٤٥٦٧٨٩".indexOf(digit));
};
export const MyComponent = component$((props) => {
  const state = useStore({ number: "" });
  return (
    <Fragment>
      <label>This input changes arabic numbers to english numbers! </label>
      <input
        value={state.number}
        onInput$={(event) =>
          (state.number = arabicToEnglish(event.target.value))
        }
      ></input>
    </Fragment>
  );
});
export default MyComponent;
```

## Web Components
```html
const arabicToEnglish = (string) => {
  const number = string.replace(/[^0-9٠-٩]+/g, "");
  return number.replace(/[٠-٩]/g, (digit) => "٠١٢٣٤٥٦٧٨٩".indexOf(digit));
};

/**
 * Usage:
 *
 *  <my-component></my-component>
 *
 */
class MyComponent extends HTMLElement {
  get _root() {
    return this.shadowRoot || this;
  }

  constructor() {
    super();
    const self = this;

    this.state = { number: "" };
    if (!this.props) {
      this.props = {};
    }

    // used to keep track of all nodes created by show/for
    this.nodesToDestroy = [];
    // batch updates
    this.pendingUpdate = false;

    // Event handler for 'input' event on input-my-component-1
    this.onInputMyComponent1Input = (event) => {
      this.state.number = arabicToEnglish(event.target.value);
      this.update();
    };

    if (undefined) {
      this.attachShadow({ mode: "open" });
    }
  }

  destroyAnyNodes() {
    // destroy current view template refs before rendering again
    this.nodesToDestroy.forEach((el) => el.remove());
    this.nodesToDestroy = [];
  }

  connectedCallback() {
    this._root.innerHTML = `
      <label>This input changes arabic numbers to english numbers!</label>
      
      <input
        data-el="input-my-component-1"
        data-dom-state="MyComponent-input-my-component-1"
      />`;
    this.pendingUpdate = true;

    this.render();
    this.onMount();
    this.pendingUpdate = false;
    this.update();
  }

  onMount() {}

  onUpdate() {}

  update() {
    if (this.pendingUpdate === true) {
      return;
    }
    this.pendingUpdate = true;
    this.render();
    this.onUpdate();
    this.pendingUpdate = false;
  }

  render() {
    // grab previous input state
    const preStateful = this.getStateful(this._root);
    const preValues = this.prepareHydrate(preStateful);

    // re-rendering needs to ensure that all nodes generated by for/show are refreshed
    this.destroyAnyNodes();
    this.updateBindings();

    // hydrate input state
    if (preValues.length) {
      const nextStateful = this.getStateful(this._root);
      this.hydrateDom(preValues, nextStateful);
    }
  }

  getStateful(el) {
    const stateful = el.querySelectorAll("[data-dom-state]");
    return stateful ? Array.from(stateful) : [];
  }
  prepareHydrate(stateful) {
    return stateful.map((el) => {
      return {
        id: el.dataset.domState,
        value: el.value,
        active: document.activeElement === el,
        selectionStart: el.selectionStart,
      };
    });
  }
  hydrateDom(preValues, stateful) {
    return stateful.map((el, index) => {
      const prev = preValues.find((prev) => el.dataset.domState === prev.id);
      if (prev) {
        el.value = prev.value;
        if (prev.active) {
          el.focus();
          el.selectionStart = prev.selectionStart;
        }
      }
    });
  }

  updateBindings() {
    this._root
      .querySelectorAll("[data-el='input-my-component-1']")
      .forEach((el) => {
        el.value = this.state.number;

        el.removeEventListener("input", this.onInputMyComponent1Input);
        el.addEventListener("input", this.onInputMyComponent1Input);
      });
  }

  // Helper to render content
  renderTextNode(el, text) {
    const textNode = document.createTextNode(text);
    if (el?.scope) {
      textNode.scope = el.scope;
    }
    if (el?.context) {
      textNode.context = el.context;
    }
    el.after(textNode);
    this.nodesToDestroy.push(el.nextSibling);
  }
}
customElements.define("my-component", MyComponent);
```

## Angular
```angular
import { NgModule } from "@angular/core";
import { BrowserModule } from "@angular/platform-browser";

import { Component } from "@angular/core";

const arabicToEnglish = (string) => {
  const number = string.replace(/[^0-9٠-٩]+/g, "");
  return number.replace(/[٠-٩]/g, (digit) => "٠١٢٣٤٥٦٧٨٩".indexOf(digit));
};

@Component({
  selector: "my-component, MyComponent",
  template: `
    <ng-container>
      <label>This input changes arabic numbers to english numbers!</label>

      <input
        [attr.value]="number"
        (input)="number = arabicToEnglish($event.target.value)"
      />
    </ng-container>
  `,
})
export class MyComponent {
  arabicToEnglish = arabicToEnglish;

  number = "";
}

@NgModule({
  declarations: [MyComponent],
  imports: [BrowserModule],
  exports: [MyComponent],
})
export class MyComponentModule {}
```


## Swift 
```swift
import SwiftUI
import JavaScriptCore

final class UpdateTracker: ObservableObject {
  @Published var value = 0;

  func update() {
    value += 1
  }
}

struct MyComponent: View {
  @ObservedObject var updateTracker = UpdateTracker()
  private var jsContext = JSContext()

  @State private var input1: String = ""

  func eval(code: String) -> JSValue! {
    return jsContext?.evaluateScript(code)
  }

  func setComputedState() {
    input1 = eval(code: "state.number").toString()!
  }

  init() {
    let jsSource = """
    const state = new Proxy(
      { number: "" },
      {
        set: (target, key, value) => {
          const returnVal = Reflect.set(target, key, value);
          update();
          return returnVal;
        },
      }
    );
    """
    jsContext?.exceptionHandler = { context, exception in
      print("JS Error: \(exception!)")
    }

    let updateRef = updateTracker.update
    let updateFn : @convention(block) () -> Void = { updateRef() }
    jsContext?.setObject(updateFn, forKeyedSubscript: "update" as NSString)

    jsContext?.evaluateScript(jsSource)
  }

  var body: some View {
    VStack {

      VStack() {Text("This input changes arabic numbers to english numbers!")}

      TextField("", text: $input1)

      }
      .onAppear {
        setComputedState()
      }

      }
    }
```